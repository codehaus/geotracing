<testset id="gameplay" clients="1">

	<test id="login-selapp">

		<send id="client1">
			<login-req name="blue2" password="user" portalname="walkandplay" protocolversion="4.0"/>
			<select-app-req appname="geoapp" rolename="user"/>
		</send>

		<expect id="client1">

			<login-rsp>
				<agent>
					<portal-context>
						<portalid>26
						</portalid>

						<portalname>walkandplay
						</portalname>

						<personid>${personid}
						</personid>

						<personname>geoapp user
						</personname>

						<accesslist>
							<access applicationname="geoapp" rolename="user"/>
						</accesslist>

					</portal-context>

				</agent>

			</login-rsp>


			<select-app-rsp>
				<!--<applicationid>${applicationid}</applicationid>-->
			</select-app-rsp>

		</expect>

	</test>

	<test id="q-play-status">
		<send id="client1">
			<utopia-req>
				<query-store-req cmd="q-play-status-by-user" user="blue2"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<query-store-rsp>
					<record>
						<name/>
						<description/>
						<gameid>${gameid}</gameid>
						<scheduleid>${scheduleid}</scheduleid>
						<gameplayid>${gameplayid}</gameplayid>
						<gameplaystate/>
					</record>
				</query-store-rsp>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-reset-req1">
		<send id="client1">
			<utopia-req>
				<play-reset-req id="${gameplayid}"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-reset-rsp/>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-start-req">
		<send id="client1">
			<utopia-req>
				<play-start-req id="${gameplayid}"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-start-rsp/>
			</utopia-rsp>
		</expect>
	</test>

	<!--
	<pt lon="4.921789169311523" lat="52.3765423330248"/>
	<pt lon="4.921917915344238" lat="52.37675192059285"/>
	<pt lon="4.922089576721191" lat="52.37693530889892"/>
	<pt lon="4.922218322753906" lat="52.377223488984086"/>
	<pt lon="4.922432899475098" lat="52.37772125015622" loc="game2-medium1" label="hit1-brugmidden"/>
	<pt lon="4.922604560852051" lat="52.37793083212911"/>
	<pt lon="4.922733306884766" lat="52.37824520322338"/>
	<pt lon="4.9228620529174805" lat="52.37855957207963"/>
	<pt lon="4.922990798950195" lat="52.37879534725308"/>
	<pt lon="4.923076629638672" lat="52.37955505869286" loc="game2-task1' label="hit2-javakade-sumatrakade"/>
	<pt lon="4.92462158203125" lat="52.37963364878544"/>
	<pt lon="4.9256086349487305" lat="52.379528861964225"/>
	<pt lon="4.926810264587402" lat="52.37937168126619"/>
	<pt lon="4.928441047668457" lat="52.379057318191556"/>
	<pt lon="4.930200576782227" lat="52.37874295287887"/>

      <pt lon="4.930887222290039" lat="52.37850717742566"/>
      <pt lon="4.932217597961426" lat="52.37834999309081"/>
      <pt lon="4.932990074157715" lat="52.378192808196424"/>
      <pt lon="4.933676719665527" lat="52.37814041310731"/>
      <pt lon="4.934406280517578" lat="52.378035622742544"/>
      <pt lon="4.935178756713867" lat="52.377826041267014"/>
      <pt lon="4.936079978942871" lat="52.37761645879678"/>
      <pt lon="4.936723709106445" lat="52.37753786511401"/>
      <pt lon="4.936637878417969" lat="52.37714489460192"/>
      <pt lon="4.936981201171875" lat="52.37675192059285"/>

    -->

	<test id="play-location-req-one-sample">
		<send id="client1">
			<utopia-req>
				<play-location-req>
					<pt lon="4.921789169311523" lat="52.3765423330248"/>
				</play-location-req>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-location-rsp/>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-location-req-multi-sample">
		<send id="client1">
			<utopia-req>
				<play-location-req>
					<pt lon="4.921917915344238" lat="52.37675192059285"/>
					<pt lon="4.922089576721191" lat="52.37693530889892"/>
					<pt lon="4.922218322753906" lat="52.377223488984086"/>
				</play-location-req>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-location-rsp/>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-location-req-hit-medium-1">
		<send id="client1">
			<utopia-req>
				<play-location-req>
					<pt lon="4.92243289" lat="52.377721250" label="game2-medium1-brugmidden"/>
				</play-location-req>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-location-rsp>
					<medium-hit id="${mediumhitid1}"/>
				</play-location-rsp>
			</utopia-rsp>
		</expect>
	</test>

	<test id="get-medium-1">
		<send id="client1">
			<utopia-req>
				<query-store-req cmd="q-medium" id="${mediumhitid1}"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<query-store-rsp>
					<record id="${mediumhitid1}">
						<name/>
						<description/>
						<type/>
					</record>
				</query-store-rsp>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-location-req-multi-sample">
		<send id="client1">
			<utopia-req>
				<play-location-req>
					<trkpt lon="4.922604560852051" lat="52.37793083212911"/>
					<trkpt lon="4.922733306884766" lat="52.37824520322338"/>
					<trkpt lon="4.9228620529174805" lat="52.37855957207963"/>
				</play-location-req>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-location-rsp/>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-location-req-hit-task-1">
		<send id="client1">
			<utopia-req>
				<play-location-req>
					<pt lon="4.922990798950195" lat="52.37879534725308"/>
					<pt lon="4.9230766296386" lat="52.379555058692" label="javakade-sumatrakade"/>
				</play-location-req>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-location-rsp>
					<task-hit id="${taskhitid1}" state="hit" answerstate="open" mediastate="open"/>
				</play-location-rsp>
			</utopia-rsp>
		</expect>
	</test>

 	<test id="get-task-1">
		<send id="client1">
			<utopia-req>
				<query-store-req cmd="q-task" id="${taskhitid1}"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<query-store-rsp>
					<record>
						<id/>
						<mediumid/>
						<mediumtype/>
						<name/>
						<description/>
						<answer/>
						<score/>
					</record>
				</query-store-rsp>
			</utopia-rsp>
		</expect>
	</test>

	<test id="medium-insert-req-1">
		<send id="client1">
			<utopia-req>
				<medium-insert-req personid="${personid}">
					<medium>
						<name>item1</name>
						<filename>/var/keyworx/webapps/walkandplay/test/media/just-1964.jpg</filename>
						<size>2758</size>
					</medium>
				</medium-insert-req>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<medium-insert-rsp id="${mediumid1}"/>
			</utopia-rsp>
		</expect>
	</test>

	 <test id="play-add-medium-task-1">
		<send id="client1">
			<utopia-req>
				<play-add-medium-req id="${mediumid1}" />
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-add-medium-rsp locationid="${locationid1}"/>
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-answer-task-1-wrong">
		<send id="client1">
			<utopia-req>
				<play-answertask-req id="${taskhitid1}" answer="wrong"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-answertask-rsp state="hit" mediastate="done" answerstate="notok" score="0" />
			</utopia-rsp>
		</expect>
	</test>

	<test id="play-answer-task-1-right">
		<send id="client1">
			<utopia-req>
				<play-answertask-req id="${taskhitid1}" answer="waag"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-answertask-rsp state="done" mediastate="done" answerstate="ok" score="10"  />
			</utopia-rsp>
		</expect>
	</test>



<!--	<test id="play-reset-req2">
		<send id="client1">
			<utopia-req>
				<play-reset-req id="${gameplayid}"/>
			</utopia-req>
		</send>

		<expect id="client1">
			<utopia-rsp>
				<play-reset-rsp/>
			</utopia-rsp>
		</expect>
	</test> -->

	<test id="logout">
		<send id="client1">
			<logout-req/>
		</send>

		<expect id="client1">
			<logout-rsp/>
		</expect>
	</test>
	 
</testset>

